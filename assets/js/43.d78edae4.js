(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{317:function(s,a,t){"use strict";t.r(a);var e=t(38),r=Object(e.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ËÆ∞‰∏ÄÊ¨°Â•áÊÄ™ÁöÑ-mysql-ÈîôËØØËß£ÂÜ≥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ËÆ∞‰∏ÄÊ¨°Â•áÊÄ™ÁöÑ-mysql-ÈîôËØØËß£ÂÜ≥","aria-hidden":"true"}},[s._v("#")]),s._v(" ËÆ∞‰∏ÄÊ¨°Â•áÊÄ™ÁöÑ MySQL ÈîôËØØËß£ÂÜ≥")]),s._v(" "),t("p",[s._v("‰ªäÂ§©ÈÉ®ÁΩ≤‰∏Ä‰∏™ PHP ÂêéÁ´ØÁöÑÊó∂ÂÄôÔºåÂèëÁé∞Âú®Êú¨Âú∞ÔºàWindowsÔºâÊµãËØïÂèØ‰ª•Ëøû‰∏äÊï∞ÊçÆÂ∫ìÔºåËÄåÂú®Áîü‰∫ßÁéØÂ¢ÉÔºàUbuntu 20.04Ôºâ‰∏äÂç¥Êä• Permission denied ÈîôËØØÔºåÂØÜÁ†ÅÈÉΩÊòØÊ≠£Á°ÆÁöÑÔºåÁúãÊù•ËøòÊòØ Ubuntu ÁöÑÂÆâÂÖ®ÂºÑÂæóÂ•ΩÂìüüòÖÔºåÈöè‰æøÂéª Google ‰∫Ü‰∏Ä‰∏ãÂèëÁé∞Â¶ÇÊûúË¶ÅÁî® root ÁôªÂΩïÂøÖÈ°ªÂæóÂä†‰∏ä "),t("code",[s._v("sudo")]),s._v("ÔºüÂ§™Â•áÂ¶ô‰∫ÜÔºå‰∫éÊòØ‰∏ÄÁßíÊÉ≥Âà∞ÂéªÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁî®Êà∑„ÄÇ")]),s._v(" "),t("p",[t("em",[s._v("ÈîôËØØÂ§ßÊ¶ÇÊòØËøôÊ†∑ÁöÑÔºå‰∏Ä‰∏™ÂæàÂπ≥Âá°ÁöÑ Access denied„ÄÇ")])]),s._v(" "),t("div",{staticClass:"language-log extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(HY000/1698): Access denied for user 'root'@'localhost'\n")])])]),t("p",[s._v("ÁÑ∂ÂêéÊàëÂ∞±ÂéªÂàõÂª∫Êñ∞ÁöÑÁî®Êà∑‰∫ÜÔºåÂÖ∑‰ΩìÊµÅÁ®ãËÄÅÁîüÂ∏∏Ë∞à‰∫Ü")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rootp'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" IDENTIFIED "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'...'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ‰∏çÊòØ root Â∞±ÂèØ‰ª•ÔºåÂòªÂòª")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rootp'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("ÁÑ∂ÂêéÂ∞±Á¶ªÂºÄ‰∫ÜÊï∞ÊçÆÂ∫ì„ÄÇÂ∞±Âú®Ëøô‰∏™Êó∂ÂÄôÊàëÁ™ÅÁÑ∂‰∏çÁü•ÈÅìÊÄé‰πàÊÉ≥ÁöÑÊÉ≥Ë¶ÅÈáçÂêØ‰∏Ä‰∏ãÊï∞ÊçÆÂ∫ìÔºåËôΩÁÑ∂ËøôÁßçÊÉÖÂÜµ‰∏ã‰∏çÈáçÂêØÊòØÂÆåÂÖ®ÂèØ‰ª•ÁöÑ„ÄÇÈáçÂêØÂ∞±ÈáçÂêØÂêßÔºåÂèçÊ≠£‰∏çÊòØÁîö‰πàÈ´òÂç±Êìç‰ΩúÔºåÂèØËøô‰∏ÄÈáçÂêØÂèØÁªôÁà∑Êï¥È∫ª‰∫ÜÂïäÔºåÂá∫Áé∞‰∫ÜÊàë‰ªéÊù•Ê≤°ÊúâËßÅËøáÁöÑÈîôËØØÔºåÁîöËá≥ËßâÂæó MariaDB Âú®ÈÄóÊàë„ÄÇÊä•Èîô‰ø°ÊÅØÂ§ßÊ¶ÇÊòØËøôÊ†∑ÁöÑÔºö")]),s._v(" "),t("div",{staticClass:"language-log extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v("¬†")]),t("div",{staticClass:"highlighted"},[s._v("¬†")]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v("¬†")]),t("br")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Aug 06 01:35:42 server systemd[1]: Starting MariaDB 10.1.47 database server...\n-- Subject: Unit mariadb.service has begun start-up\n-- Defined-By: systemd\n-- Support: http://www.ubuntu.com/support\n--\n-- Unit mariadb.service has begun starting up.\nAug 06 01:35:43 server mysqld[4431]: 2021-08-06  1:35:43 140103940127872 [Note] /usr/sbin/mysqld (mysqld 10.1.47-MariaDB-0ubuntu0.18.04.1) starting as process 4431 ...\nAug 06 01:35:46 server systemd[1]: mariadb.service: Main process exited, code=exited, status=7/NOTRUNNING\nAug 06 01:35:46 server systemd[1]: mariadb.service: Failed with result 'exit-code'.\nAug 06 01:35:46 server systemd[1]: Failed to start MariaDB 10.1.47 database server.\n-- Subject: Unit mariadb.service has failed\n-- Defined-By: systemd\n-- Support: http://www.ubuntu.com/support\n--\n-- Unit mariadb.service has failed.\n--\n-- The result is RESULT.\n")])])]),t("p",[s._v("ÁúãÁúãÈ´ò‰∫ÆÁöÑË°åÔºåËØ¥ÁöÑÊòØ SQL ËØùÂêóÔºüÂï•Âè´‰Ωú "),t("code",[s._v("Failed with result 'exit-code'")]),s._v("„ÄÅ"),t("code",[s._v("The result is RESULT")]),s._v("ÔºüÁ¨ëÊ≠ªÔºåÂê¨Âêõ‰∏ÄÂ∏≠ËØùÔºåÂ¶ÇÂê¨‰∏ÄÂ∏≠ËØùÔºÅÊó†ËÆ∫ÊÄé‰πàÂéªÊü•ÔºåÂæóÂà∞ÁöÑÁªìÊûúÈÉΩ‰∏çÊòØÂÆåÂÖ®Á¨¶ÂêàÔºå‰ΩÜÊòØÂÆÉ‰ª¨ÈÉΩÊúâ‰∏Ä‰∏™ÂÖ±ÊÄßÂ∞±ÊòØ‚Äî‚Äî‰Ω†Ë¶ÅÈáçË£Ö‰Ω†ÁöÑ MySQL„ÄÇÁ°ÆÂÆûÔºåÈáçË£ÖÊòØ‰∏Ä‰∏™ÂÆåÁæéÁöÑÂäûÊ≥ïÔºåÊàë‰πüÂæàÂñúÊ¨¢ÔºåÂπ≤ËÑÜÂà©ËêΩ‰∏çÁî®Ë¥π‰∫ãË¥πÂäõÊÉ≥ÂäûÊ≥ïÔºåÂèØÊòØ‚Äî‚ÄîÊàëÁöÑÊï∞ÊçÆÔºÅMySQL Ê≠ª‰∫ÜÔºåÊâÄ‰ª• "),t("code",[s._v("mysqldump")]),s._v(" ‰πüÁî®‰∏ç‰∫Ü...ËøôÊòØ‰∏™ÊÇñËÆ∫ÔºåÊàëÁöÑÊï∞ÊçÆÂèØËÉΩÂèñ‰∏çÂõûÊù•‰∫ÜÔºåÈÇ£ÁúüÊòØÂ§üÊÅêÊÄñ„ÄÇ‰ΩÜÊòØÊàëÂøΩÁÑ∂ÂèàÊÉ≥Âà∞ÔºåMySQL ‰∏ÄÂÆöÊòØÈÄöËøáÊñá‰ª∂Êù•Â≠òÂÇ®Êï∞ÊçÆÁöÑÔºå‰∫éÊòØÊàëÊêúÂà∞‰∫Ü‰∏ãÈù¢ËøôÊÆµËØù„ÄÇ")]),s._v(" "),t("blockquote",[t("p",[s._v("What you should do is image your drive, copy it to something else, in preparation for your reinstall. I'd recommend copying everything as authentically as you can, even if that takes a while. That feeling you get when you realize you forgot to salvage something important that is now gone forever is not good.")]),s._v(" "),t("p",[s._v("MySQL generally stores data in the data directory. It may take some work to get your MySQL back into the same configuration as before, so be sure to grab the appropriate my.cnf file.")]),s._v(" "),t("p",[s._v("It can be really difficult to extract data from a bunch of MySQL data files without the MySQL process actually running. This is why tools like mysqldump exist. If you can get it running, even limping along, that'll be good enough to snapshot it.\n"),t("br"),t("br"),s._v(" "),t("em",[s._v("Êù•Ëá™ "),t("a",{attrs:{href:"https://stackoverflow.com/questions/20130706/backup-dead-mysql-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://stackoverflow.com/questions/20130706/backup-dead-mysql-server"),t("OutboundLink")],1)])])]),s._v(" "),t("p",[s._v("ËøôÊÆµËØùÂëäËØâÊàëÔºåÂ∞ÜÊù•ÁöÑË∑Ø‰ºöÂæàÂùéÂù∑...ÂïäËøôÔºåÊàëÂè™ÊòØÊÉ≥Ë¶ÅÈáçÂêØ‰∏™ MySQLÔºåÁî®ÂæóÁùÄËøôÊ†∑ÂØπÊàëÂêó„ÄÇÊùüÊâãÊó†Á≠ñÁöÑÊó∂ÂÄôÔºåÊàëÁ™ÅÁÑ∂ÊÉ≥Âà∞ÔºåÊó¢ÁÑ∂Ë¶ÅÈáçË£ÖÔºåË¶Å‰∏çÊääÊï∞ÊçÆÈÉΩÊç¢‰∏™‰ΩçÁΩÆËØïËØïÔºü‰πüÂ∞±ÊòØËØ¥ÊääÊï¥‰∏™ MySQL Áî®Êù•Â≠òÊîæÊï∞ÊçÆÁöÑÊñá‰ª∂Â§πÊç¢Âà∞Âè¶Â§ñ‰∏Ä‰∏™Âú∞ÊñπÔºåÂóØÔºåÊç¢‰∏™Êñ∞ÁöÑÁéØÂ¢ÉÔºåÊ≤°ÂáÜÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂ∞±ÊòØËøô‰∏™Â•áÂ¶ôÁöÑËÑëÂõûË∑ØÊãØÊïë‰∫ÜÊàë„ÄÇ")]),s._v(" "),t("p",[s._v("È¶ñÂÖàÔºåÈÅáÂà∞‰∫Ü‰∏Ä‰∏™ÂæàÂùëÁöÑÂú∞ÊñπÔºåÈÇ£Â∞±ÊòØ‰∏çÁ°ÆÂÆöÊï∞ÊçÆÂú®Âì™Èáå„ÄÇÁΩë‰∏äËØ¥ÁöÑÈªòËÆ§Âú® "),t("code",[s._v("/var/lib/mysql")]),s._v("ÔºåËôΩÁÑ∂Êàë‰πüÂèëÁé∞ÈÇ£ÈáåÊúâÂæàÂ§öÊñá‰ª∂Ôºå‰πüÊòØ‰∏çÊï¢Á°ÆÂÆö„ÄÇÁÑ∂ÂêéÂèàÊúâÁöÑËØ¥ÂèØ‰ª•Âú®ÈÖçÁΩÆÊñá‰ª∂ "),t("code",[s._v("/etc/mysql/mysql.conf.d/mysqld.cnf")]),s._v(" ÈáåÈù¢ÁúãÔºåÁªìÊûúÂπ∂Ê≤°ÊúâËøô‰∏™Êñá‰ª∂Ôºå‰πüËÆ∏ÊòØÂõ†‰∏∫ÊàëÊòØ MariaDBÔºåÊâÄ‰ª•Â∫îËØ•Âú® "),t("code",[s._v("/etc/mysql/my.cnf")]),s._v(" ÈáåÈù¢„ÄÇÁ°ÆÂÆûÊúâËøô‰∏™Êñá‰ª∂Ôºå‰ΩÜÊòØÈáåÈù¢Âπ∂Ê≤°Êúâ "),t("code",[s._v("datadir")]),s._v(" Ëøô‰∏™ÂèÇÊï∞ÔºåÁúüÊòØÈÜâ‰∫Ü„ÄÇÂà∞ÂêéÊù•ÊàëÈºìËµ∑ÂãáÊ∞îÊää "),t("code",[s._v("datadir")]),s._v(" ËÆæÁΩÆÊàê‰∫Ü "),t("code",[s._v("/mysql-db")]),s._v("ÔºåÂºÄÂßã‰∫ÜËøÅÁßª‰πãË∑Ø„ÄÇ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /mysql-db\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av /var/lib/mysql/ /mysql-db\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /mysql-db\n")])])]),t("p",[s._v("ÁõòÁÇπ‰∏Ä‰∏ãËøôÈáåÁöÑÂùëÔºåÈ¶ñÂÖà "),t("code",[s._v("rsync")]),s._v(" ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ "),t("code",[s._v("/var/lib/mysql/")]),s._v(" ÁöÑÊúÄÂêéÂ∏¶‰∏çÂ∏¶ "),t("code",[s._v("/")]),s._v(" ÊòØÊúâÂå∫Âà´ÁöÑ„ÄÇÂ∏¶‰∏ä‰∫ÜÂ∞±‰ª£Ë°® "),t("code",[s._v("/var/lib/mysql/*")]),s._v("Ôºå‰∏çÂ∏¶‰∏äÂ∞±‰ª£Ë°®Ëøô‰∏™ÁõÆÂΩïÊú¨Ë∫´„ÄÇÂàöÂºÄÂßãÊ≤°ÊúâÂ∏¶ÔºåÂ§çÂà∂‰∫Ü‰ª•Âêé‰πüÊ≤°ÊúâÂéª "),t("code",[s._v("ls /mysql-db")]),s._v(" ÂØºËá¥ÂêØÂä®ÁöÑÊó∂ÂÄôÂà∑‰∫Ü‰∏ÄÂ§ßÂ†Ü not found Êä•Èîô...ÁÑ∂ÂêéÂ∞±ÊòØÊùÉÈôêÈóÆÈ¢òÔºåÂ∫îËØ•ÊòØ "),t("code",[s._v("755")]),s._v("„ÄÇ")]),s._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",[s._v("‰∏∫Âï•‰∏çÁî® "),t("code",[s._v("mv *")]),s._v("ÔºüÂõ†‰∏∫ÂΩìÊó∂ÊÉ≥‰∏çÂà∞ "),t("code",[s._v("mv")]),s._v("ÔºåÂà´È™Ç‰∫Ü")])]),s._v(" "),t("p",[s._v("ÁÑ∂ÂêéËøòÊúâ‰∏Ä‰∏™ÁÇπÂ∞±ÊòØË¶ÅÂéª apparmor ÈáåÈù¢ÂàõÂª∫‰∏Ä‰∏™Âà´Âêç„ÄÇ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apparmor.d/tunables/alias\n")])])]),t("p",[s._v("Ê∑ªÂä† "),t("code",[s._v("alias /var/lib/mysql -> /mysql-db")]),s._v("ÔºåÁÑ∂Âêé "),t("code",[s._v("systemctl restart apparmor")]),s._v("„ÄÇÊé•‰∏ãÊù•Â∞±ÂèØ‰ª•ÂáÜÂ§áÂêØÂä® MySQL ‰∫Ü„ÄÇ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("systemctl start mysql\n")])])]),t("p",[s._v("ËÆ©ÊàëÈúáÊÉäÁöÑÊòØËøôÊ¨°ÂêØÂä®Ê≤°ÊúâÊä•Èîô‰∫Ü„ÄÇÂéüÁêÜËøòÂæÖËß£ÈáäÔºå‰∏çËøáÊàë‰∏ÄÁßíÂ∞±ÂéªÂÖ®ÈáèÂ§á‰ªΩ‰∫Ü‰∏Ä‰∏ãÔºåÂõ†‰∏∫Êúâ‰∫ÜÂ§á‰ªΩÂ∞±ÂèØ‰ª•Áõ¥Êé•ÈáçË£ÖÂ∞±Ê≤°ÊúâËøô‰πàÂ§öÁ†¥‰∫ã‰∫ÜüòÖ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mysqldump -u root --all-databases "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /alldb.sql\n")])])]),t("p",[s._v("ÁÑ∂ÂêéËøòÂèØ‰ª•Âú® cron ÈáåÈù¢Âä†‰∏Ä‰∏™ÂÆöÊó∂ÁöÑÂ§á‰ªΩÔºå‰∏∫‰∫ÜÈÅøÂÖçËæìÂÖ•ÂØÜÁ†ÅÔºåÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™ "),t("code",[s._v("~/my.cnf")]),s._v(" ÁÑ∂ÂêéÂÜôÂÖ•ÂÜÖÂÆπ")]),s._v(" "),t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[mysqldump]\nuser=root\npassword=...\n")])])]),t("p",[s._v("ÁÑ∂ÂêéÂú® "),t("code",[s._v("crontab -e")]),s._v(" ÈáåÈù¢Âä†ÂÖ•")]),s._v(" "),t("div",{staticClass:"language-crontab extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("10 * * * * mysqldump -u root --all-databases > /alldb.sql\n")])])]),t("p",[s._v("Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ")])])},[],!1,null,null,null);a.default=r.exports}}]);